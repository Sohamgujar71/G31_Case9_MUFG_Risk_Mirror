<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MIRO Finance Quiz with Coins</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      margin: 0; padding: 0;
      background: #f4f7fb;
    }

    /* ===== Wallet ===== */
    #wallet {
      position: fixed;
      bottom: 20px; right: 20px;
      background: linear-gradient(135deg, #007BFF, #00c6ff);
      color: white;
      padding: 15px 25px;
      border-radius: 15px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
      transition: transform 0.3s;
    }
    #wallet:hover { transform: scale(1.05); }

    /* ===== Quiz Popup ===== */
    #quizPopup {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.6);
      justify-content: center;
      align-items: center;
      z-index: 9999;
      animation: fadeIn 0.5s;
    }
    @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }

    .popup-content {
      background: #fff;
      display: flex;
      align-items: center;
      padding: 20px;
      border-radius: 20px;
      width: 500px;
      max-width: 90%;
      box-shadow: 0 10px 25px rgba(0,0,0,0.25);
      animation: slideIn 0.5s ease-out;
      position: relative;
    }
    @keyframes slideIn {
      from { transform: translateY(-40px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .miro-avatar {
      flex: 0 0 100px;
      margin-right: 15px;
    }
    .miro-avatar img {
      width: 100%;
      border-radius: 50%;
      border: 3px solid #007BFF;
    }

    .quiz-body { flex: 1; }
    .quiz-body h3 { margin-bottom: 15px; color: #333; }

    .option {
      display: block;
      margin: 8px 0;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.2s;
    }
    .option:hover { background: #f0f0f0; }
    .correct { background: #d4edda !important; border-color: #28a745; }
    .wrong { background: #f8d7da !important; border-color: #dc3545; }

    .close-btn {
      margin-top: 15px;
      background: #007BFF;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.3s;
    }
    .close-btn:hover { background: #0056b3; }

    /* ===== Coins Animation ===== */
    .coin {
      position: fixed;
      top: -50px;
      width: 40px;
      height: 40px;
      background: url('https://cdn-icons-png.flaticon.com/512/217/217853.png') no-repeat center;
      background-size: cover;
      animation: fall 2.5s linear forwards;
      z-index: 10000;
    }
    @keyframes fall {
      to { transform: translateY(100vh); opacity: 0; }
    }

    /* ===== Redeem Section ===== */
    #redeemSection {
      display: none;
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%) scale(0.9);
      background: white;
      padding: 25px;
      border-radius: 20px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.3);
      z-index: 10000;
      text-align: center;
      width: 90%;
      max-width: 900px;
      height: 90vh;
      animation: popupZoom 0.4s ease forwards;
    }
    @keyframes popupZoom {
      to { transform: translate(-50%, -50%) scale(1); }
    }

    #redeemSection h2 {
      margin-bottom: 20px;
      font-size: 24px;
      color: #333;
    }

    .scratch-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(2, 1fr);
      gap: 20px;
    }

    .scratch-card {
      background: #ccc;
      border-radius: 15px;
      overflow: hidden;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: bold;
      color: white;
      transition: transform 0.3s;
      aspect-ratio: 1 / 1;   /* ðŸ‘ˆ makes it perfect square */
    }
    .scratch-card:hover { transform: scale(1.05); }

    .scratch-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: none;
    }
    .revealed img { display: block; }
    .revealed .placeholder { display: none; }

    .placeholder {
      position: absolute;
      inset: 0;

      display: flex;
      align-items: center;
      justify-content: center;
    }
    .placeholder span {
      font-size: 22px;
      font-weight: bold;
      color: #fff;
    }
  </style>
</head>
<body>

  <!-- Wallet -->
  <div id="wallet">ðŸ’° MIRO Coins: <span id="coinCount">0</span></div>

  <!-- Quiz Popup -->
  <div id="quizPopup">
    <div class="popup-content">
      <div class="miro-avatar">
        <img src="MIRO.png" alt="Miro Avatar">
      </div>
      <div class="quiz-body">
        <h3 id="question"></h3>
        <div id="options"></div>
        <button class="close-btn" onclick="closePopup()">Close</button>
      </div>
    </div>
  </div>

  <!-- Redeem Scratch Cards -->
  <div id="redeemSection">
    <h2> Redeem Your Coins</h2>
    <div class="scratch-grid" id="scratchGrid"></div>
    <button class="close-btn" onclick="closeRedeem()">Close</button>
  </div>

  <script>
    // ==== Question Bank ====
    const questions = [
      { q: "Which of the following best defines 'Emergency Fund'?", options: ["Money for vacations", "Money for unexpected expenses", "Investment in mutual funds", "A short-term loan"], answer: 1 },
      { q: "What does 'DTI (Debt-to-Income)' ratio measure?", options: ["Income Ã· Rent", "EMI Ã· Monthly income", "Savings Ã· Expenses", "Investments Ã· Liabilities"], answer: 1 },
      { q: "SIP (Systematic Investment Plan) is primarily used in:", options: ["Real Estate", "Mutual Funds", "Gold Bonds", "Insurance"], answer: 1 },
      { q: "What does 'Diversification' in investing mean?", options: ["Investing all money in one stock", "Investing in different assets", "Keeping money in FD", "Selling assets quickly"], answer: 1 },
      { q: "What is the recommended size of an emergency fund?", options: ["1 month of expenses", "3â€“6 months of expenses", "12 months of expenses", "No savings needed"], answer: 1 },
      { q: "Which investment is typically considered inflation-beating in the long run?", options: ["Equity/Stocks", "Savings Account", "Fixed Deposit", "Gold Jewelry"], answer: 0 },
      { q: "What does 'compound interest' mean?", options: ["Interest only on principal", "Interest on both principal and accumulated interest", "Fixed return per year", "Penalty for delayed payments"], answer: 1 },
      { q: "What is a credit score primarily used for?", options: ["Determining income tax", "Assessing loan/creditworthiness", "Measuring savings rate", "Calculating insurance premium"], answer: 1 },
      { q: "What does 'liquidity' of an asset mean?", options: ["How risky the asset is", "How easily it can be converted to cash", "How much return it gives", "How long it is locked in"], answer: 1 },
      { q: "Which is an example of a tax-saving investment under Section 80C in India?", options: ["Mutual Funds (ELSS)", "Credit Card Payments", "Fixed Deposit (<1 yr)", "Buying Gold"], answer: 0 },
      { q: "What is the main advantage of UPI (Unified Payments Interface)?", options: ["High interest on savings", "Instant, real-time money transfers", "Tax-free income", "Foreign currency exchange"], answer: 1 },
      { q: "What does 'inflation' mean?", options: ["Increase in product quality", "General increase in prices over time", "Decrease in supply of money", "Increase in employment rates"], answer: 1 },
      { q: "In mutual funds, 'NAV' stands for:", options: ["Net Annual Value", "Net Asset Value", "New Account Value", "Nominal Asset Value"], answer: 1 },
      { q: "What is the benefit of having health insurance?", options: ["Increases your salary", "Provides protection against medical expenses", "Helps you save tax only", "Guarantees free medicines"], answer: 1 }
    ];

    let popup = document.getElementById("quizPopup");
    let questionElem = document.getElementById("question");
    let optionsElem = document.getElementById("options");
    let coinCountElem = document.getElementById("coinCount");

    // Persistent coin balance
    let coins = parseInt(localStorage.getItem("miroCoins")) || 0;
    coinCountElem.innerText = coins;

    function showPopup() {
      let randomQ = questions[Math.floor(Math.random() * questions.length)];
      questionElem.innerText = randomQ.q;
      optionsElem.innerHTML = "";

      randomQ.options.forEach((opt, index) => {
        let btn = document.createElement("div");
        btn.classList.add("option");
        btn.innerText = opt;
        btn.onclick = () => {
          if (!btn.classList.contains("correct") && !btn.classList.contains("wrong")) {
            if (index === randomQ.answer) {
              btn.classList.add("correct");
              addCoins(5); // reward coins once
            } else {
              btn.classList.add("wrong");
            }
          }
        };
        optionsElem.appendChild(btn);
      });

      popup.style.display = "flex";
    }

    function closePopup() {
      popup.style.display = "none";
    }

    // ==== Coin System ====
    function addCoins(amount) {
      coins += amount;
      localStorage.setItem("miroCoins", coins);
      coinCountElem.innerText = coins;
      // Animate more coins shower
      for (let i = 0; i < 15; i++) {
        createCoin();
      }
    }

    function createCoin() {
      let coin = document.createElement("div");
      coin.classList.add("coin");
      coin.style.left = Math.random() * window.innerWidth + "px";
      coin.style.animationDuration = (1.5 + Math.random() * 1.5) + "s";
      document.body.appendChild(coin);
      setTimeout(() => { coin.remove(); }, 3000);
    }

    // ==== Redeem Offers ====
    document.getElementById("wallet").onclick = () => {
      if (coins >= 10) {
        document.getElementById("redeemSection").style.display = "block";
        renderScratchCards();
        coins -= 10; // deduct coins
        localStorage.setItem("miroCoins", coins);
        coinCountElem.innerText = coins;
      } else {
        alert("You need at least 10 MIRO Coins to redeem!");
      }
    };

    function renderScratchCards() {
      let grid = document.getElementById("scratchGrid");
      grid.innerHTML = "";

      // Replace these with your own offer images
      let offers = [
        "Bgsc.png",
        "Bgsc 1.png",
        "Bgsc2.png",
        "Bgsc 3.png",
      ];

      for (let i = 0; i < 4; i++) {
        let card = document.createElement("div");
        card.classList.add("scratch-card");

        let placeholder = document.createElement("div");
        placeholder.classList.add("placeholder");
        let span = document.createElement("span");
        span.innerText = "Scratch Me";
        placeholder.appendChild(span);

        let img = document.createElement("img");
        img.src = offers[i];
        img.alt = "Offer";

        card.appendChild(placeholder);
        card.appendChild(img);

        card.onclick = () => { card.classList.add("revealed"); };

        grid.appendChild(card);
      }
    }

    function closeRedeem() {
      document.getElementById("redeemSection").style.display = "none";
    }

    // Show quiz on load
    window.onload = showPopup;
    // Show quiz every 15 mins
    setInterval(showPopup, 900000);
  </script>
</body>
</html>
